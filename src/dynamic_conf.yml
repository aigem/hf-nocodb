http:
  routers:
    nocodb:
      rule: "PathPrefix(`/`) && !PathPrefix(`/serve`) && !PathPrefix(`/cronicle`) && !PathPrefix(`/smartcode`)"
      service: nocodb
    serve:
      rule: "PathPrefix(`/serve`)"
      service: serve
      middlewares:
        - serve-stripprefix
    cronicle:
      rule: "PathPrefix(`/cronicle`)"
      service: cronicle
      middlewares:
        - cronicle-stripprefix
    smartcode:
      rule: "PathPrefix(`/smartcode`)"
      service: smartcode
      middlewares:
        - smartcode-stripprefix
  services:
    nocodb:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1:7861"
    serve:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1:7862"
    cronicle:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1:${CRONICLE_PORT}"
    smartcode:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1:3000"
  middlewares:
    serve-stripprefix:
      stripPrefix:
        prefixes:
          - "/serve"
    cronicle-stripprefix:
      stripPrefix:
        prefixes:
          - "/cronicle"
    smartcode-stripprefix:
      stripPrefix:
        prefixes:
          - "/smartcode"
